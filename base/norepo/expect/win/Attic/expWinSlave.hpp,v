head	1.1;
access;
symbols
	win32-jump-point-1:1.1.4.10
	telco-tec-win32-take2-branch:1.1.0.4
	telco-tec-win32-branch:1.1.0.2;
locks; strict;
comment	@// @;


1.1
date	2001.11.09.01.17.40;	author davygrvy;	state dead;
branches
	1.1.2.1
	1.1.4.1;
next	;

1.1.2.1
date	2001.11.09.01.17.40;	author davygrvy;	state Exp;
branches;
next	1.1.2.2;

1.1.2.2
date	2001.11.15.07.25.19;	author davygrvy;	state Exp;
branches;
next	;

1.1.4.1
date	2002.03.06.01.51.53;	author davygrvy;	state Exp;
branches;
next	1.1.4.2;

1.1.4.2
date	2002.03.08.23.37.16;	author davygrvy;	state Exp;
branches;
next	1.1.4.3;

1.1.4.3
date	2002.03.09.22.56.23;	author davygrvy;	state Exp;
branches;
next	1.1.4.4;

1.1.4.4
date	2002.03.10.01.02.37;	author davygrvy;	state Exp;
branches;
next	1.1.4.5;

1.1.4.5
date	2002.03.11.05.36.37;	author davygrvy;	state Exp;
branches;
next	1.1.4.6;

1.1.4.6
date	2002.03.12.01.38.19;	author davygrvy;	state Exp;
branches;
next	1.1.4.7;

1.1.4.7
date	2002.03.12.07.09.36;	author davygrvy;	state Exp;
branches;
next	1.1.4.8;

1.1.4.8
date	2002.03.12.07.59.14;	author davygrvy;	state Exp;
branches;
next	1.1.4.9;

1.1.4.9
date	2002.03.12.21.07.00;	author davygrvy;	state Exp;
branches;
next	1.1.4.10;

1.1.4.10
date	2002.03.12.22.36.44;	author davygrvy;	state Exp;
branches;
next	1.1.4.11;

1.1.4.11
date	2002.06.22.14.02.03;	author davygrvy;	state Exp;
branches;
next	1.1.4.12;

1.1.4.12
date	2002.06.23.09.22.45;	author davygrvy;	state Exp;
branches;
next	1.1.4.13;

1.1.4.13
date	2002.06.27.04.37.51;	author davygrvy;	state Exp;
branches;
next	1.1.4.14;

1.1.4.14
date	2002.07.03.02.47.44;	author davygrvy;	state Exp;
branches;
next	1.1.4.15;

1.1.4.15
date	2003.08.25.23.17.49;	author davygrvy;	state Exp;
branches;
next	1.1.4.16;

1.1.4.16
date	2003.08.26.20.46.53;	author davygrvy;	state Exp;
branches;
next	;


desc
@@


1.1
log
@file expWinSlave.hpp was initially added on branch telco-tec-win32-branch.
@
text
@@


1.1.4.1
log
@Our main() for the slave driver is getting a deep rewrite.  This shell has a
good structure.  The outer edges are in process.  slavedrv.exe currently
won't link at this time.
@
text
@a0 165
/* ----------------------------------------------------------------------------
 * expWinSlave.hpp --
 *
 *	Useful definitions used by the slave driver application but not
 *	useful for anybody else.
 *
 * ----------------------------------------------------------------------------
 *
 * Written by: Don Libes, libes@@cme.nist.gov, NIST, 12/3/90
 * 
 * Design and implementation of this program was paid for by U.S. tax
 * dollars.  Therefore it is public domain.  However, the author and NIST
 * would appreciate credit if this program or parts of it are used.
 * 
 * Copyright (c) 1997 Mitel Corporation
 *	work by Gordon Chaffee <chaffee@@bmrc.berkeley.edu> for the WinNT port.
 *
 * Copyright (c) 2001-2002 Telindustrie, LLC
 *	work by David Gravereaux <davygrvy@@pobox.com> for any Win32 OS.
 *
 * ----------------------------------------------------------------------------
 * URLs:    http://expect.nist.gov/
 *	    http://expect.sf.net/
 *	    http://bmrc.berkeley.edu/people/chaffee/expectnt.html
 * ----------------------------------------------------------------------------
 * RCS: @@(#) $Id: expWinSlave.hpp,v 1.1.2.2 2001/11/15 07:25:19 davygrvy Exp $
 * ----------------------------------------------------------------------------
 */
#ifndef _EXPWINSLAVE_HPP
#define _EXPWINSLAVE_HPP

typedef struct ExpSlaveDebugArg {
    HANDLE hMaster;		/* Output handle */
    HANDLE hConsole;		/* Console handle to use */
    HANDLE process;		/* Handle to subprocess */
    DWORD globalPid;		/* Program identifier of slave */
    HANDLE thread;		/* Handle of debugger thread */

    HANDLE event;		/* Gets set when the process has been created */
    DWORD result;		/* Result of process being started */
    DWORD lastError;		/* GetLastError for result */
    int passThrough;		/* Pass through mode? */
    int useSocket;		/* Communicate to master through socket */

    /* Args for ExpCreateProcess */
    int argc;			/* Number of args to start slave program */
    char **argv;		/* Argument list of slave program (in UTF-8) */
    HANDLE slaveStdin;		/* stdin for slave program */
    HANDLE slaveStdout;		/* stdout for slave program */
    HANDLE slaveStderr;		/* stderr for slave program */
} ExpSlaveDebugArg;

typedef struct _EXP_KEY {
    WORD wVirtualKeyCode;
    WORD wVirtualScanCode;
    DWORD dwControlKeyState;
} EXP_KEY;

#define EXP_KEY_CONTROL 0
#define EXP_KEY_SHIFT   1
#define EXP_KEY_LSHIFT  1
#define EXP_KEY_RSHIFT  2
#define EXP_KEY_ALT     3


/* For ExpVtFunctionToKeyArray.  Ordering must match ExpFunctionToKeyArray[] */
#define EXP_KEY_UP		0
#define EXP_KEY_DOWN		1
#define EXP_KEY_RIGHT		2
#define EXP_KEY_LEFT		3
#define EXP_KEY_END		4
#define EXP_KEY_HOME		5
#define EXP_KEY_PAGEUP		6
#define EXP_KEY_PAGEDOWN	7
#define EXP_KEY_INSERT		8
#define EXP_KEY_DELETE		9
#define EXP_KEY_SELECT		10
#define EXP_KEY_F1		11
#define EXP_KEY_F2		12
#define EXP_KEY_F3		13
#define EXP_KEY_F4		14
#define EXP_KEY_F5		15
#define EXP_KEY_F6		16
#define EXP_KEY_F7		17
#define EXP_KEY_F8		18
#define EXP_KEY_F9		19
#define EXP_KEY_F10		20
#define EXP_KEY_F11		21
#define EXP_KEY_F12		22
#define EXP_KEY_F13		23
#define EXP_KEY_F14		24
#define EXP_KEY_F15		25
#define EXP_KEY_F16		26
#define EXP_KEY_F17		27
#define EXP_KEY_F18		28
#define EXP_KEY_F19		29
#define EXP_KEY_F20		30
#define EXP_WIN_RESIZE		31

extern EXP_KEY ExpModifierKeyArray[];
extern EXP_KEY ExpAsciiToKeyArray[];
extern EXP_KEY ExpFunctionToKeyArray[];
extern DWORD   ExpConsoleInputMode;
extern HANDLE  ExpConsoleOut;
extern int     ExpDebug;

extern TCL_CPP void ExpAddToWaitQueue(HANDLE handle);
extern TCL_CPP void ExpKillProcessList();
extern TCL_CPP DWORD WINAPI ExpSlaveDebugThread(LPVOID arg);
extern TCL_CPP DWORD WINAPI ExpGetExecutablePathA(PSTR pathInOut);
extern TCL_CPP DWORD WINAPI ExpGetExecutablePathW(PWSTR pathInOut);
extern TCL_CPP BOOL ExpWriteMaster(int useSocket, HANDLE hFile, LPCVOID buf, DWORD n, LPOVERLAPPED over);
extern TCL_CPP BOOL ExpReadMaster(int useSocket, HANDLE hFile, void *buf, DWORD n, PDWORD pCount, LPWSAOVERLAPPED over, PDWORD pError);
extern TCL_CPP void ExpNewConsoleSequences(int useSocket, HANDLE hMaster, LPWSAOVERLAPPED over);
extern TCL_CPP void ExpProcessFreeByHandle(HANDLE hProcess);
extern TCL_CPP void ExpSetConsoleSize(HANDLE hConsoleInW, HANDLE hConsoleOut, int w, int h, int useSocket, HANDLE hMaster, LPWSAOVERLAPPED over);
extern TCL_CPP void ExpDynloadTclStubs (void);

#ifdef __cplusplus
#include "./Mcl/include/CMcl.h"

class ExpSpawnClientTransport
{
public:
    virtual void ExpWriteMaster() = 0;
    virtual void ExpReadMaster() = 0;
};

class ExpSpawnMailboxClient : public ExpSpawnClientTransport
{
public:
    ExpSpawnMailboxClient(const char *name);
    virtual void ExpWriteMaster();
    virtual void ExpReadMaster();
private:
    CMclMailbox *MasterToExpect;
    CMclMailbox *MasterFromExpect;
};

class ExpSpawnSocketCli : public ExpSpawnClientTransport
{
public:
    ExpSpawnSocketCli(const char *name);
    virtual void ExpWriteMaster();
    virtual void ExpReadMaster();
private:
    SOCKET sock;
};


class ExpSlaveTrap {
};
class ExpSlaveTrapPipe : public ExpSlaveTrap {
public:
    ExpSlaveTrapPipe(int argc, char * const argv[]);
};
class ExpSlaveTrapDbg : public ExpSlaveTrap {
public:
    ExpSlaveTrapDbg(int argc, char * const argv[]);
};

extern int ExpWinSlaveDoEvents(ExpSpawnClientTransport *transport, ExpSlaveTrap *trap);
#endif /* __cplusplus */

#endif /* _EXPWINSLAVE_HPP */@


1.1.4.2
log
@not close to done, but a good launch point.
@
text
@d26 1
a26 1
 * RCS: @@(#) $Id: expWinSlave.hpp,v 1.1.4.1 2002/03/06 01:51:53 davygrvy Exp $
a156 1

a159 2
private:
    CMclThreadAutoPtr debuggerThread;
@


1.1.4.3
log
@Started on the app-level message queue.
@
text
@d26 1
a26 1
 * RCS: @@(#) $Id: expWinSlave.hpp,v 1.1.4.2 2002/03/08 23:37:16 davygrvy Exp $
a121 5
class Message
{
    char *lala;
};

d155 1
a155 1
    ExpSlaveTrapPipe(int argc, char * const argv[], CMclQueue<Message> &mQ);
d160 1
a160 1
    ExpSlaveTrapDbg(int argc, char * const argv[], CMclQueue<Message> &mQ);
d164 2
@


1.1.4.4
log
@Added more fatal error checks.
@
text
@d26 1
a26 1
 * RCS: @@(#) $Id: expWinSlave.hpp,v 1.1.4.3 2002/03/09 22:56:23 davygrvy Exp $
d137 1
a137 1
    ExpSpawnMailboxClient(const char *name, CMclQueue<Message> &_mQ);
a142 1
    CMclQueue<Message> &mQ;
d148 1
a148 1
    ExpSpawnSocketCli(const char *name, CMclQueue<Message> &_mQ);
a151 1
    CMclQueue<Message> &mQ;
d160 1
a160 1
    ExpSlaveTrapPipe(int argc, char * const argv[], CMclQueue<Message> &_mQ);
d165 1
a165 1
    ExpSlaveTrapDbg(int argc, char * const argv[], CMclQueue<Message> &_mQ);
a166 1
    CMclQueue<Message> &mQ;
@


1.1.4.5
log
@replacing mailboxing with simple pipes as our transport.
@
text
@d26 1
a26 1
 * RCS: @@(#) $Id: expWinSlave.hpp,v 1.1.4.4 2002/03/10 01:02:37 davygrvy Exp $
a31 1
#if 0
a51 1
#endif
d124 1
a124 5
public:
    enum Type {TYPE_NORMAL, TYPE_ERROR, TYPE_INSTREAM};
    Type mode;
    BYTE *bytes;
    DWORD length;
d127 1
a127 1
class SpawnClientTransport
d130 2
a131 1
    virtual void Write(Message &) = 0;
d134 1
a134 1
class SpawnMailboxClient : public SpawnClientTransport
d137 3
a139 2
    SpawnMailboxClient(const char *name, CMclQueue<Message> &_mQ);
    virtual void Write(Message &);
d146 1
a146 1
class SpawnPipeClient : public SpawnClientTransport
d149 3
a151 2
    SpawnPipeClient(const char *name, CMclQueue<Message> &_mQ);
    virtual void Write(Message &);
d154 1
a154 3
    HANDLE hStdOut;
    HANDLE hStdErr;
    HANDLE hStdIn;
@


1.1.4.6
log
@Message class pulled-out to a seperate source file, due to expected growth in that area.
@
text
@d26 1
a26 1
 * RCS: @@(#) $Id: expWinSlave.hpp,v 1.1.4.5 2002/03/11 05:36:37 davygrvy Exp $
a120 1

a122 2
#include "expWinUtils.hpp"
#include "expWinMessage.hpp"
d124 8
@


1.1.4.7
log
@removed all use of Tcl from the slavedrv.  It was only being used for hash tables.  replaced them with std::map.  It's a bit fatter now, but i'll live.
@
text
@d26 1
a26 1
 * RCS: @@(#) $Id: expWinSlave.hpp,v 1.1.4.6 2002/03/12 01:38:19 davygrvy Exp $
d123 49
a171 6
#   include "Mcl/include/CMcl.h"
#   include "expWinUtils.hpp"
#   include "expWinMessage.hpp"
#   include "expWinConsoleDebugger.hpp"
#   include "expWinSpawnClient.hpp"
#   include "expWinSlaveTrap.hpp"
@


1.1.4.8
log
@final cleaning of Tcl from the slavedrv.
@
text
@d26 1
a26 1
 * RCS: @@(#) $Id: expWinSlave.hpp,v 1.1.4.7 2002/03/12 07:09:36 davygrvy Exp $
d32 7
a38 1
#include <windows.h>
d40 65
d109 21
a129 19
//extern TCL_CPP void ExpAddToWaitQueue(HANDLE handle);
//extern TCL_CPP void ExpKillProcessList();
//extern TCL_CPP DWORD WINAPI ExpSlaveDebugThread(LPVOID arg);
//extern TCL_CPP DWORD WINAPI ExpGetExecutablePathA(PSTR pathInOut);
//extern TCL_CPP DWORD WINAPI ExpGetExecutablePathW(PWSTR pathInOut);
//extern TCL_CPP BOOL ExpWriteMaster(int useSocket, HANDLE hFile, LPCVOID buf, DWORD n, LPOVERLAPPED over);
//extern TCL_CPP BOOL ExpReadMaster(int useSocket, HANDLE hFile, void *buf, DWORD n, PDWORD pCount, LPWSAOVERLAPPED over, PDWORD pError);
//extern TCL_CPP void ExpNewConsoleSequences(int useSocket, HANDLE hMaster, LPWSAOVERLAPPED over);
//extern TCL_CPP void ExpProcessFreeByHandle(HANDLE hProcess);
//extern TCL_CPP void ExpSetConsoleSize(HANDLE hConsoleInW, HANDLE hConsoleOut, int w, int h, int useSocket, HANDLE hMaster, LPWSAOVERLAPPED over);


#include "Mcl/include/CMcl.h"
#include "slavedrvmc.h"
#include "expWinUtils.hpp"
#include "expWinMessage.hpp"
#include "expWinConsoleDebugger.hpp"
#include "expWinSpawnClient.hpp"
#include "expWinSlaveTrap.hpp"
@


1.1.4.9
log
@added a ShutdownTcl() so I wouldn't have to share the HMODULE.
@
text
@d26 1
a26 1
 * RCS: @@(#) $Id: expWinSlave.hpp,v 1.1.4.8 2002/03/12 07:59:14 davygrvy Exp $
a47 3

void DynloadTclStubs (void);
void ShutdownTcl (void);
@


1.1.4.10
log
@Re-arranged headers.  The ConsoleDebugger class is now hidden from public veiw.  I might have to pull off a bridge pattern to hide it more correctly.
@
text
@d26 1
a26 1
 * RCS: @@(#) $Id: expWinSlave.hpp,v 1.1.4.9 2002/03/12 21:07:00 davygrvy Exp $
d29 2
a30 2
#ifndef INC_expWinSlave_hpp__
#define INC_expWinSlave_hpp__
d34 15
d57 1
d61 1
a61 1
#endif // INC_expWinSlave_hpp__@


1.1.4.11
log
@More new good stuff.
@
text
@d26 1
a26 1
 * RCS: @@(#) $Id: expWinSlave.hpp,v 1.1.4.10 2002/03/12 22:36:44 davygrvy Exp $
a42 1
#include "expWinConsoleDebugger.hpp"
@


1.1.4.12
log
@matches the class name changes and added a proto for the new
MapToKeys() function.
@
text
@d26 1
a26 1
 * RCS: @@(#) $Id: expWinSlave.hpp,v 1.1.4.11 2002/06/22 14:02:03 davygrvy Exp $
d42 1
a42 1
#include "expWinClientTransport.hpp"
a44 3

void MapToKeys (Message *msg, CMclQueue<Message *> &mQ);

@


1.1.4.13
log
@renamed ClientTransport* to be TestClient* as the name is more descriptive.
@
text
@d26 1
a26 1
 * RCS: @@(#) $Id: expWinSlave.hpp,v 1.1.4.12 2002/06/23 09:22:45 davygrvy Exp $
d42 1
a42 1
#include "expWinTestClient.hpp"
@


1.1.4.14
log
@framework for experimenting with the "Detours" library added.
@
text
@d26 1
a26 1
 * RCS: @@(#) $Id: expWinSlave.hpp,v 1.1.4.13 2002/06/27 04:37:51 davygrvy Exp $
a43 1
#include "expWinConsoleDetour.hpp"
@


1.1.4.15
log
@these uncommitted edits have been sitting on my desktop for an eternity.

Adds some MS-DOS support but fails to deliver the required hooks to
succeed.
@
text
@d26 1
a26 1
 * RCS: @@(#) $Id: expWinSlave.hpp,v 1.1.4.14 2002/07/03 02:47:44 davygrvy Exp $
d44 1
a44 1
//#include "expWinConsoleDetour.hpp"
@


1.1.4.16
log
@titleblock comment changes and removal of the Detours library usage.
@
text
@a18 1
 * Copyright (c) 2003 ActiveState Corporation
d26 1
a26 1
 * RCS: @@(#) $Id: expWinSlave.hpp,v 1.1.4.15 2003/08/25 23:17:49 davygrvy Exp $
d38 1
a38 1
#include "CMcl.h"
@


1.1.2.1
log
@beginning the C++ rewrite.
@
text
@a0 162
/* ----------------------------------------------------------------------------
 * expWinSlave.hpp --
 *
 *	Useful definitions used by the slave driver application but not
 *	useful for anybody else.
 *
 * ----------------------------------------------------------------------------
 *
 * Written by: Don Libes, libes@@cme.nist.gov, NIST, 12/3/90
 * 
 * Design and implementation of this program was paid for by U.S. tax
 * dollars.  Therefore it is public domain.  However, the author and NIST
 * would appreciate credit if this program or parts of it are used.
 * 
 * Copyright (c) 1997 Mitel Corporation
 *	work by Gordon Chaffee <chaffee@@bmrc.berkeley.edu> for the WinNT port.
 *
 * Copyright (c) 2001 Telindustrie, LLC
 *	work by David Gravereaux <davygrvy@@pobox.com> for any Win32 OS.
 *
 * ----------------------------------------------------------------------------
 * URLs:    http://expect.nist.gov/
 *	    http://expect.sf.net/
 *	    http://bmrc.berkeley.edu/people/chaffee/expectnt.html
 * ----------------------------------------------------------------------------
 * RCS: @@(#) $Id: expWinSlave.h,v 1.1.2.3 2001/11/07 10:04:57 davygrvy Exp $
 * ----------------------------------------------------------------------------
 */
#ifndef _EXPWINSLAVE_HPP
#define _EXPWINSLAVE_HPP

typedef struct ExpSlaveDebugArg {
    HANDLE hMaster;		/* Output handle */
    HANDLE hConsole;		/* Console handle to use */
    HANDLE process;		/* Handle to subprocess */
    DWORD globalPid;		/* Program identifier of slave */
    HANDLE thread;		/* Handle of debugger thread */

    HANDLE event;		/* Gets set when the process has been created */
    DWORD result;		/* Result of process being started */
    DWORD lastError;		/* GetLastError for result */
    int passThrough;		/* Pass through mode? */
    int useSocket;		/* Communicate to master through socket */

    /* Args for ExpCreateProcess */
    int argc;			/* Number of args to start slave program */
    char **argv;		/* Argument list of slave program (in UTF-8) */
    HANDLE slaveStdin;		/* stdin for slave program */
    HANDLE slaveStdout;		/* stdout for slave program */
    HANDLE slaveStderr;		/* stderr for slave program */
} ExpSlaveDebugArg;

typedef struct _EXP_KEY {
    WORD wVirtualKeyCode;
    WORD wVirtualScanCode;
    DWORD dwControlKeyState;
} EXP_KEY;

#define EXP_KEY_CONTROL 0
#define EXP_KEY_SHIFT   1
#define EXP_KEY_LSHIFT  1
#define EXP_KEY_RSHIFT  2
#define EXP_KEY_ALT     3


/* For ExpVtFunctionToKeyArray.  Ordering must match ExpFunctionToKeyArray[] */
#define EXP_KEY_UP		0
#define EXP_KEY_DOWN		1
#define EXP_KEY_RIGHT		2
#define EXP_KEY_LEFT		3
#define EXP_KEY_END		4
#define EXP_KEY_HOME		5
#define EXP_KEY_PAGEUP		6
#define EXP_KEY_PAGEDOWN	7
#define EXP_KEY_INSERT		8
#define EXP_KEY_DELETE		9
#define EXP_KEY_SELECT		10
#define EXP_KEY_F1		11
#define EXP_KEY_F2		12
#define EXP_KEY_F3		13
#define EXP_KEY_F4		14
#define EXP_KEY_F5		15
#define EXP_KEY_F6		16
#define EXP_KEY_F7		17
#define EXP_KEY_F8		18
#define EXP_KEY_F9		19
#define EXP_KEY_F10		20
#define EXP_KEY_F11		21
#define EXP_KEY_F12		22
#define EXP_KEY_F13		23
#define EXP_KEY_F14		24
#define EXP_KEY_F15		25
#define EXP_KEY_F16		26
#define EXP_KEY_F17		27
#define EXP_KEY_F18		28
#define EXP_KEY_F19		29
#define EXP_KEY_F20		30
#define EXP_WIN_RESIZE		31

extern EXP_KEY ExpModifierKeyArray[];
extern EXP_KEY ExpAsciiToKeyArray[];
extern EXP_KEY ExpFunctionToKeyArray[];
extern DWORD   ExpConsoleInputMode;
extern HANDLE  ExpConsoleOut;
extern int     ExpDebug;

extern TCL_CPP void			ExpAddToWaitQueue(HANDLE handle);
extern TCL_CPP void			ExpKillProcessList();
extern TCL_CPP DWORD WINAPI		ExpSlaveDebugThread(LPVOID arg);
extern TCL_CPP DWORD WINAPI		ExpGetExecutablePathA(PSTR pathInOut);
extern TCL_CPP DWORD WINAPI		ExpGetExecutablePathW(PWSTR pathInOut);
extern TCL_CPP BOOL			ExpWriteMaster(int useSocket, HANDLE hFile,
				    LPCVOID buf, DWORD n, LPOVERLAPPED over);
extern TCL_CPP BOOL			ExpReadMaster(int useSocket, HANDLE hFile,
				    void *buf, DWORD n, PDWORD pCount,
				    LPWSAOVERLAPPED over, PDWORD pError);
extern TCL_CPP void			ExpNewConsoleSequences(int useSocket,
				    HANDLE hMaster, LPWSAOVERLAPPED over);
extern TCL_CPP void			ExpProcessFreeByHandle(HANDLE hProcess);
extern TCL_CPP void			ExpSetConsoleSize(HANDLE hConsoleInW,
				    HANDLE hConsoleOut,
				    int w, int h, int useSocket,
				    HANDLE hMaster, LPWSAOVERLAPPED over);


#ifdef __cplusplus
#include "./Mcl/include/CMcl.h"

class ExpSpawnTransportCli
{
public:
    virtual void ExpWriteMaster() = 0;
    virtual void ExpReadMaster() = 0;
};

class ExpSpawnMailboxCli : public ExpSpawnTransportCli
{
public:
    ExpSpawnMailboxCli(const char *name);
    virtual void ExpWriteMaster();
    virtual void ExpReadMaster();
private:
    CMclMailbox *MasterToExpect;
    CMclMailbox *MasterFromExpect;
};

/* below not implimented yet */
class ExpSpawnSocketCli : public ExpSpawnTransportCli
{
public:
    ExpSpawnSocketCli(const char *name);
    virtual void ExpWriteMaster();
    virtual void ExpReadMaster();
private:
};

/* from expWinSpawnTransport.cpp */
extern ExpSpawnTransportCli *ExpWinSpawnOpenTransport(const char *name);

#endif /* __cplusplus */

#endif /* _EXPWINSLAVE_HPP */@


1.1.2.2
log
@unfinished work committed anyway.
@
text
@d26 1
a26 1
 * RCS: @@(#) $Id: expWinSlave.hpp,v 1.1.2.1 2001/11/09 01:17:40 davygrvy Exp $
a159 13
class ExpSlaveTrap {
};
class ExpSlaveTrapPipe : public ExpSlaveTrap {
public:
    ExpSlaveTrapPipe(int, char **);
};
class ExpSlaveTrapDbg : public ExpSlaveTrap {
public:
    ExpSlaveTrapDbg(int, char **);
};

extern ExpSlaveTrap *ExpWinSlaveOpenTrap(char *meth, int argc, char *argv[]);
extern int ExpWinSlaveEvents(ExpSpawnTransportCli *transport, ExpSlaveTrap *trap);
@


