head	1.1;
access;
symbols
	win32-jump-point-1:1.1.2.1.2.5
	telco-tec-win32-take2-branch:1.1.2.1.0.2
	telco-tec-win32-branch:1.1.0.2;
locks; strict;
comment	@ * @;


1.1
date	2001.09.13.02.01.49;	author davygrvy;	state dead;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2001.09.13.02.01.49;	author davygrvy;	state Exp;
branches
	1.1.2.1.2.1;
next	1.1.2.2;

1.1.2.2
date	2001.10.11.02.41.47;	author davygrvy;	state Exp;
branches;
next	1.1.2.3;

1.1.2.3
date	2001.10.29.06.40.43;	author davygrvy;	state Exp;
branches;
next	1.1.2.4;

1.1.2.4
date	2001.11.07.10.04.57;	author davygrvy;	state Exp;
branches;
next	;

1.1.2.1.2.1
date	2001.11.22.08.50.38;	author davygrvy;	state Exp;
branches;
next	1.1.2.1.2.2;

1.1.2.1.2.2
date	2002.02.10.02.59.46;	author davygrvy;	state Exp;
branches;
next	1.1.2.1.2.3;

1.1.2.1.2.3
date	2002.02.10.12.03.30;	author davygrvy;	state Exp;
branches;
next	1.1.2.1.2.4;

1.1.2.1.2.4
date	2002.02.11.09.56.00;	author davygrvy;	state Exp;
branches;
next	1.1.2.1.2.5;

1.1.2.1.2.5
date	2002.03.08.23.33.13;	author davygrvy;	state Exp;
branches;
next	1.1.2.1.2.6;

1.1.2.1.2.6
date	2003.08.26.20.46.52;	author davygrvy;	state Exp;
branches;
next	;


desc
@@


1.1
log
@file expWinPort.h was initially added on branch telco-tec-win32-branch.
@
text
@@


1.1.2.1
log
@snap29 "import"
@
text
@a0 22
/*
 * expWinPort.h --
 *
 *	This header file handles porting issues that occur because of
 *	differences between Windows and Unix. 
 *
 * Copyright (c) 1997 Mitel Corporation
 *
 * See the file "license.terms" for information on usage and redistribution
 * of this file, and for a DISCLAIMER OF ALL WARRANTIES.
 *
 */

#ifndef _EXPWINPORT_H
#define _EXPWINPORT_H

#include <windows.h>
#include <time.h>

#define HAVE_SV_TIMEZONE 1

#endif /* _EXPWINPORT_H */
@


1.1.2.1.2.1
log
@A working set of code against Tcl8.4!
@
text
@d17 1
a17 1
/*#include <windows.h>*/
@


1.1.2.1.2.2
log
@moved all header files over to a more core style with the beginnings of a
Stubs table.  This work is far from complete.
@
text
@d1 1
a1 1
/* ----------------------------------------------------------------------------
a6 8
 * ----------------------------------------------------------------------------
 *
 * Written by: Don Libes, libes@@cme.nist.gov, NIST, 12/3/90
 * 
 * Design and implementation of this program was paid for by U.S. tax
 * dollars.  Therefore it is public domain.  However, the author and NIST
 * would appreciate credit if this program or parts of it are used.
 * 
a7 1
 *	work by Gordon Chaffee <chaffee@@bmrc.berkeley.edu> for the WinNT port.
d9 2
a10 2
 * Copyright (c) 2001 Telindustrie, LLC
 *	work by David Gravereaux <davygrvy@@pobox.com> for any Win32 OS.
a11 7
 * ----------------------------------------------------------------------------
 * URLs:    http://expect.nist.gov/
 *	    http://expect.sf.net/
 *	    http://bmrc.berkeley.edu/people/chaffee/expectnt.html
 * ----------------------------------------------------------------------------
 * RCS: @@(#) $Id: expWinPort.h,v 1.1.2.4 2001/11/07 10:04:57 davygrvy Exp $
 * ----------------------------------------------------------------------------
d14 2
a15 6
#ifndef _EXPWINPORT
#define _EXPWINPORT

#ifndef _EXPINT
#   include "expInt.h"
#endif
d17 2
d22 1
a22 62
#define EXP_SLAVE_CREATE 'c'
#define EXP_SLAVE_KEY    'k'
#define EXP_SLAVE_MOUSE  'm'
#define EXP_SLAVE_WRITE  'w'
#define EXP_SLAVE_KILL   'x'

/*
 * Define the types of attempts to use to kill the subprocess
 */
#define EXP_KILL_TERMINATE  0x1
#define EXP_KILL_CTRL_C     0x2
#define EXP_KILL_CTRL_BREAK 0x4

/*
 * Errors and logging
 */
#define EXP_LOG(format, args) \
    ExpSyslog("Expect SlaveDriver (%s: %d): " format, __FILE__, __LINE__, args)

/*
 * The following defines identify the various types of applications that 
 * run under windows.  There is special case code for the various types.
 */

#define EXP_APPL_NONE	    0
#define EXP_APPL_BATCH	    1
#define EXP_APPL_DOS16	    2
#define EXP_APPL_OS2	    3
#define EXP_APPL_OS2DRV	    4
#define EXP_APPL_WIN16	    5
#define EXP_APPL_WIN16DRV   6
#define EXP_APPL_WIN32CUI   7
#define EXP_APPL_WIN32GUI   8
#define EXP_APPL_WIN32DLL   9
#define EXP_APPL_WIN32DRV   10
#define EXP_APPL_WIN64CUI   11
#define EXP_APPL_WIN64GUI   12
#define EXP_APPL_WIN64DLL   13
#define EXP_APPL_WIN64DRV   14


#undef TCL_STORAGE_CLASS
#if defined(BUILD_spawndriver)
#   define TCL_STORAGE_CLASS
#elif defined(BUILD_exp)
#   define TCL_STORAGE_CLASS DLLEXPORT
#else
#   ifdef USE_EXP_STUBS
#	define TCL_STORAGE_CLASS
#   else
#	define TCL_STORAGE_CLASS DLLIMPORT
#   endif
#endif


#include "expPlatDecls.h"
#include "expIntPlatDecls.h"

#undef TCL_STORAGE_CLASS
#define TCL_STORAGE_CLASS DLLIMPORT

#endif /* _EXPWINPORT */
@


1.1.2.1.2.3
log
@All file comments have the same form.
@
text
@d18 1
a18 1
 * Copyright (c) 2001-2002 Telindustrie, LLC
d26 1
a26 1
 * RCS: @@(#) $Id: expWinPort.h,v 1.1.2.1.2.2 2002/02/10 02:59:46 davygrvy Exp $
@


1.1.2.1.2.4
log
@Can now build for Stubs and provide a Stubs table, too,  WeeHoo..
@
text
@d26 1
a26 1
 * RCS: @@(#) $Id: expWinPort.h,v 1.1.2.1.2.3 2002/02/10 12:03:30 davygrvy Exp $
a92 3

typedef TclFile (__cdecl *tclWinMakeFileProcType)(HANDLE handle);
extern tclWinMakeFileProcType tclWinMakeFileProc;
@


1.1.2.1.2.5
log
@stopped including the IntPlat stuff from here.
@
text
@d26 1
a26 1
 * RCS: @@(#) $Id: expWinPort.h,v 1.1.2.1.2.4 2002/02/11 09:56:00 davygrvy Exp $
d82 1
a82 1
#if defined(BUILD_slavedriver)
d99 1
a99 1
/*#include "expIntPlatDecls.h"*/
@


1.1.2.1.2.6
log
@titleblock comment changes and removal of the Detours library usage.
@
text
@a18 1
 * Copyright (c) 2003 ActiveState Corporation
d26 1
a26 1
 * RCS: @@(#) $Id: expWinPort.h,v 1.1.2.1.2.5 2002/03/08 23:33:13 davygrvy Exp $
@


1.1.2.2
log
@slavedrv.exe is building..  need to add Stubs startup code.
@
text
@a16 1
#define _WINSOCKAPI_  /* avoid sourcing winsock.h, so winsock2.h can be used instead. */
@


1.1.2.3
log
@expStubInit.c now hooked in.  Nothing inside exp.decl except some test
code to buzz the lines.
@
text
@d14 2
a15 2
#ifndef _EXPWINPORT
#define _EXPWINPORT
d17 1
d23 1
a23 53
#define EXP_SLAVE_CREATE 'c'
#define EXP_SLAVE_KEY    'k'
#define EXP_SLAVE_MOUSE  'm'
#define EXP_SLAVE_WRITE  'w'
#define EXP_SLAVE_KILL   'x'

/*
 * Define the types of attempts to use to kill the subprocess
 */
#define EXP_KILL_TERMINATE  0x1
#define EXP_KILL_CTRL_C     0x2
#define EXP_KILL_CTRL_BREAK 0x4

/*
 * Errors and logging
 */
#define FILEPOSINFO			__FILE__ "(" STRINGIFY(__LINE__) ")"
#define EXP_LOG0(errCode)		ExpSyslog(errCode, FILEPOSINFO, 0)
#define EXP_LOG1(errCode, arg1)		ExpSyslog(errCode, FILEPOSINFO, arg1, 0)
#define EXP_LOG2(errCode, arg1, arg2)	ExpSyslog(errCode, FILEPOSINFO, arg1, arg2, 0)

/*
 * The following defines identify the various types of applications that 
 * run under windows.  There is special case code for the various types.
 */

#define EXP_APPL_NONE	0
#define EXP_APPL_DOS	1
#define EXP_APPL_WIN3X	2
#define EXP_APPL_WIN32CUI	3
#define EXP_APPL_WIN32GUI	4


extern DWORD		ExpApplicationType (const char *originalName,
			    char *fullPath);
extern DWORD		ExpCreateProcess (int argc, char **argv,
			    HANDLE inputHandle, HANDLE outputHandle,
			    HANDLE errorHandle, int allocConsole,
			    int hideConsole, int debug, int newProcessGroup,
			    Tcl_Pid *pidPtr, PDWORD globalPidPtr);
extern Tcl_Channel	ExpCreateSpawnChannel (Tcl_Interp *, Tcl_Channel chan);
extern void		ExpSyslog TCL_VARARGS(DWORD,arg1);
extern TCHAR*		ExpSyslogGetSysMsg (DWORD);
extern Tcl_Pid		Exp_WaitPid (Tcl_Pid pid, int *statPtr, int options);
extern void		Exp_KillProcess (Tcl_Pid pid);
extern void		ExpInitWinProcessAPI (void);
extern int		ExpDynloadTclStubs (void);

#include "expPlatDecls.h"
#include "expIntPlatDecls.h"


#endif /* _EXPWINPORT */
@


1.1.2.4
log
@Numerous changes
@
text
@d1 1
a1 1
/* ----------------------------------------------------------------------------
a6 8
 * ----------------------------------------------------------------------------
 *
 * Written by: Don Libes, libes@@cme.nist.gov, NIST, 12/3/90
 * 
 * Design and implementation of this program was paid for by U.S. tax
 * dollars.  Therefore it is public domain.  However, the author and NIST
 * would appreciate credit if this program or parts of it are used.
 * 
a7 1
 *	work by Gordon Chaffee <chaffee@@bmrc.berkeley.edu> for the WinNT port.
d9 2
a10 2
 * Copyright (c) 2001 Telindustrie, LLC
 *	work by David Gravereaux <davygrvy@@pobox.com> for any Win32 OS.
a11 7
 * ----------------------------------------------------------------------------
 * URLs:    http://expect.nist.gov/
 *	    http://expect.sf.net/
 *	    http://bmrc.berkeley.edu/people/chaffee/expectnt.html
 * ----------------------------------------------------------------------------
 * RCS: @@(#) $Id: exp.h,v 1.1.2.5 2001/10/29 06:40:29 davygrvy Exp $
 * ----------------------------------------------------------------------------
d17 2
a18 4
#ifndef _EXPINT
#   include "expInt.h"
#endif

d38 4
a41 3
#define EXP_LOG0(errCode)		ExpWinSyslog(errCode, __FILE__, (int)__LINE__, 0)
#define EXP_LOG1(errCode, arg1)		ExpWinSyslog(errCode, __FILE__, (int)__LINE__, arg1, 0)
#define EXP_LOG2(errCode, arg1, arg2)	ExpWinSyslog(errCode, __FILE__, (int)__LINE__, arg1, arg2, 0)
d48 21
a68 20
#define EXP_APPL_NONE	    0
#define EXP_APPL_DOS	    1
#define EXP_APPL_WIN3X	    2
#define EXP_APPL_WIN32CUI   3
#define EXP_APPL_WIN32GUI   4


#undef TCL_STORAGE_CLASS
#if defined(BUILD_spawndriver)
#   define TCL_STORAGE_CLASS
#elif defined(BUILD_exp)
#   define TCL_STORAGE_CLASS DLLEXPORT
#else
#   ifdef USE_EXP_STUBS
#	define TCL_STORAGE_CLASS
#   else
#	define TCL_STORAGE_CLASS DLLIMPORT
#   endif
#endif

d71 1
a72 2
#undef TCL_STORAGE_CLASS
#define TCL_STORAGE_CLASS DLLIMPORT
@


