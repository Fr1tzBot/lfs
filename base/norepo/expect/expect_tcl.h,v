head	5.35;
access;
symbols
	expect_5_45:5.35
	expect_6_branch:5.35.0.2
	expect_5_44_1_15:5.35
	activestate_win32_port_start:5.31
	telco-tec-win32-take2-branch:5.29.0.6
	telco-tec-win32-branch:5.29.0.4
	expect-sf418892-sf439042-branch:5.29.0.2
	tclpro-1-5-0:5.29
	tclpro-1-4-1:5.29
	tclpro-1-4-0:5.29
	expect-5-32-2:5.29
	expect-5-32-0:5.29
	ajuba-ajuba2-2-0:5.28.1.1.2.3
	scriptics-sc-2-0-b5:5.28.1.1.2.3
	scriptics-sc-2-0-fixed:5.28.1.1.2.3
	scriptics-sc-2-0-b2:5.28.1.1.2.3
	scriptics-sc-2-0-b1:5.28.1.1.2.3
	scriptics-sc-1-1:5.28.1.1.2.3
	scriptics-sc-1-1-b1:5.28.1.1.2.3
	scriptics-sc-1-1-branch:5.28.1.1.2.3.0.4
	scriptics-sc-1-1-base:5.28.1.1.2.3
	scriptics-sc-1-0:5.28.1.1.2.3
	scriptics-sc-1-0-branch:5.28.1.1.2.3.0.2
	scriptics-sc-1-0-base:5.28.1.1.2.3
	expect-5-31-3:5.28.1.1.2.3
	scriptics-bc-1-0-b1:5.28.1.1.2.3
	scriptics-tclpro-1-3-0:5.28.1.1.2.3
	scriptics-tclpro-1-3-b4:5.28.1.1.2.3
	scriptics-tclpro-1-3-b3:5.28.1.1.2.3
	expect-5-31:5.28.1.1.2.3
	expect-5-31-branch:5.28.1.1.0.2
	expect-5-31-base:5.28.1.1
	scriptics-tclpro-1-2:5.28.1.1
	scriptics-tclpro-1-2-b2:5.28.1.1
	scriptics-tclpro-1-2-b1:5.28.1.1
	scriptics-tclpro-1-2-a1:5.28.1.1
	expect-5-28-1:5.28.1.1
	expect:5.28.1;
locks; strict;
comment	@ * @;


5.35
date	2010.07.01.00.53.49;	author eee;	state Exp;
branches;
next	5.34;

5.34
date	2010.03.24.19.28.18;	author eee;	state Exp;
branches;
next	5.33;

5.33
date	2006.03.01.17.21.45;	author andreas_kupries;	state Exp;
branches;
next	5.32;

5.32
date	2004.06.03.20.06.39;	author andreas_kupries;	state Exp;
branches;
next	5.31;

5.31
date	2002.04.16.21.00.29;	author libes;	state Exp;
branches;
next	5.30;

5.30
date	2002.03.23.04.55.04;	author libes;	state Exp;
branches;
next	5.29;

5.29
date	2000.01.06.23.22.06;	author wart;	state Exp;
branches
	5.29.4.1
	5.29.6.1;
next	5.28;

5.28
date	98.10.14.22.53.22;	author cvsadmin;	state Exp;
branches
	5.28.1.1;
next	;

5.28.1.1
date	98.10.14.22.53.22;	author cvsadmin;	state Exp;
branches
	5.28.1.1.2.1;
next	;

5.28.1.1.2.1
date	99.06.15.01.32.11;	author don;	state Exp;
branches;
next	5.28.1.1.2.2;

5.28.1.1.2.2
date	99.06.20.06.32.20;	author libes;	state Exp;
branches;
next	5.28.1.1.2.3;

5.28.1.1.2.3
date	99.06.28.06.29.27;	author libes;	state Exp;
branches;
next	;

5.29.4.1
date	2001.10.02.23.04.51;	author davygrvy;	state dead;
branches;
next	;

5.29.6.1
date	2001.11.22.08.50.37;	author davygrvy;	state dead;
branches;
next	;


desc
@@


5.35
log
@Undoing all changes made by me during ANSIfication attempt, and
reverting to tag 'expect_5_44_1_15'.  Further ANSIfication will
be pursued on a branch.
@
text
@/* expect_tcl.h - include file for using the expect library, libexpect.a
with Tcl (and optionally Tk)

Written by: Don Libes, libes@@cme.nist.gov, NIST, 12/3/90

Design and implementation of this program was paid for by U.S. tax
dollars.  Therefore it is public domain.  However, the author and NIST
would appreciate credit if this program or parts of it are used.

*/

#ifndef _EXPECT_TCL_H
#define _EXPECT_TCL_H

#include <stdio.h>
#include "expect_comm.h"

/*
 * This is a convenience macro used to initialize a thread local storage ptr.
 * Stolen from tclInt.h
 */
#ifndef TCL_TSD_INIT
#define TCL_TSD_INIT(keyPtr)	(ThreadSpecificData *)Tcl_GetThreadData((keyPtr), sizeof(ThreadSpecificData))
#endif

EXTERN int exp_cmdlinecmds;
EXTERN int exp_interactive;
EXTERN FILE *exp_cmdfile;
EXTERN char *exp_cmdfilename;
EXTERN int exp_getpid;	/* pid of Expect itself */
EXTERN int exp_buffer_command_input;

EXTERN int exp_strict_write;

EXTERN int exp_tcl_debugger_available;

EXTERN Tcl_Interp *exp_interp;

#define Exp_Init Expect_Init
EXTERN int	Expect_Init _ANSI_ARGS_((Tcl_Interp *));	/* for Tcl_AppInit apps */
EXTERN void	exp_parse_argv _ANSI_ARGS_((Tcl_Interp *,int argc,char **argv));
EXTERN int	exp_interpreter _ANSI_ARGS_((Tcl_Interp *,Tcl_Obj *));
EXTERN int	exp_interpret_cmdfile _ANSI_ARGS_((Tcl_Interp *,FILE *));
EXTERN int	exp_interpret_cmdfilename _ANSI_ARGS_((Tcl_Interp *,char *));
EXTERN void	exp_interpret_rcfiles _ANSI_ARGS_((Tcl_Interp *,int my_rc,int sys_rc));

EXTERN char *	exp_cook _ANSI_ARGS_((char *s,int *len));

EXTERN void	expCloseOnExec _ANSI_ARGS_((int));

			/* app-specific exit handler */
EXTERN void	(*exp_app_exit)_ANSI_ARGS_((Tcl_Interp *));
EXTERN void	exp_exit_handlers _ANSI_ARGS_((ClientData));

EXTERN void	exp_error _ANSI_ARGS_(TCL_VARARGS(Tcl_Interp *,interp));

#endif /* _EXPECT_TCL_H */
@


5.34
log
@more ANSIfications
@
text
@d40 6
a45 6
EXTERN int	Expect_Init (Tcl_Interp *);	/* for Tcl_AppInit apps */
EXTERN void	exp_parse_argv (Tcl_Interp *,int argc,char **argv);
EXTERN int	exp_interpreter (Tcl_Interp *,Tcl_Obj *);
EXTERN int	exp_interpret_cmdfile (Tcl_Interp *,FILE *);
EXTERN int	exp_interpret_cmdfilename (Tcl_Interp *,char *);
EXTERN void	exp_interpret_rcfiles (Tcl_Interp *,int my_rc,int sys_rc);
d47 1
a47 1
EXTERN char *	exp_cook (char *s,int *len);
d49 1
a49 1
EXTERN void	expCloseOnExec (int);
d52 2
a53 2
EXTERN void	(*exp_app_exit)(Tcl_Interp *);
EXTERN void	exp_exit_handlers (ClientData);
d55 1
a55 1
EXTERN void	exp_error TCL_VARARGS(Tcl_Interp *,interp);
@


5.33
log
@
	* exp_main_sub.c: Added command 'exp_configure' for magic configuration.
	* exp_command.c:  Accepts option -strictwrite. Default is 0, ignoring
	* exp_chan.c:     write errors (compatible to 5.41). Setting to 1 re-
	* expect_tcl.h:   activates 5.42 behaviour.
@
text
@d40 6
a45 6
EXTERN int	Expect_Init _ANSI_ARGS_((Tcl_Interp *));	/* for Tcl_AppInit apps */
EXTERN void	exp_parse_argv _ANSI_ARGS_((Tcl_Interp *,int argc,char **argv));
EXTERN int	exp_interpreter _ANSI_ARGS_((Tcl_Interp *,Tcl_Obj *));
EXTERN int	exp_interpret_cmdfile _ANSI_ARGS_((Tcl_Interp *,FILE *));
EXTERN int	exp_interpret_cmdfilename _ANSI_ARGS_((Tcl_Interp *,char *));
EXTERN void	exp_interpret_rcfiles _ANSI_ARGS_((Tcl_Interp *,int my_rc,int sys_rc));
d47 1
a47 1
EXTERN char *	exp_cook _ANSI_ARGS_((char *s,int *len));
d49 1
a49 1
EXTERN void	expCloseOnExec _ANSI_ARGS_((int));
d52 2
a53 2
EXTERN void	(*exp_app_exit)_ANSI_ARGS_((Tcl_Interp *));
EXTERN void	exp_exit_handlers _ANSI_ARGS_((ClientData));
d55 1
a55 1
EXTERN void	exp_error _ANSI_ARGS_(TCL_VARARGS(Tcl_Interp *,interp));
@


5.32
log
@
	* aclocal.m4 (TCLHDIRDASHI): Extended with path to unix headers as
	  well.
	* expect_tcl.h: Added inclusion of <stdio.h>.
	  Both changes required for Expect to compile against Tcl 8.5
	  after the header reform.
	* configure: Regenerated.
@
text
@d33 2
@


5.31
log
@misc updates
@
text
@d15 1
@


5.30
log
@Andreas Kupries mods to provide CONST support per TIP 27.
@
text
@d44 1
a44 1
EXTERN CONST char *	exp_cook _ANSI_ARGS_((CONST char *s,int *len));
@


5.29
log
@Merge of expect5-31-branch to mainline
@
text
@d44 1
a44 1
EXTERN char *	exp_cook _ANSI_ARGS_((char *s,int *len));
@


5.29.6.1
log
@A working set of code against Tcl8.4!
@
text
@@


5.29.4.1
log
@Top-level source files removed.
@
text
@@


5.28
log
@Initial revision
@
text
@d17 8
d39 1
a39 1
EXTERN int	exp_interpreter _ANSI_ARGS_((Tcl_Interp *));
d46 1
a46 1
EXTERN void	exp_close_on_exec _ANSI_ARGS_((int));
a49 1
EXTERN void	exp_exit _ANSI_ARGS_((Tcl_Interp *,int status));
@


5.28.1.1
log
@Import of Expect v. 5.28.1
@
text
@@


5.28.1.1.2.1
log
@making expect.c compile
@
text
@a16 8
/*
 * This is a convenience macro used to initialize a thread local storage ptr.
 * Stolen from tclInt.h
 */
#ifndef TCL_TSD_INIT
#define TCL_TSD_INIT(keyPtr)	(ThreadSpecificData *)Tcl_GetThreadData((keyPtr), sizeof(ThreadSpecificData))
#endif

@


5.28.1.1.2.2
log
@Fixed:
 expect command's arg handling to work (like interact)
 spawn -open
 expect eof
and various other bugs.
Expect now runs its minimal test suite (but not the examples).
@
text
@d46 1
a46 1
EXTERN void	expCloseOnExec _ANSI_ARGS_((int));
@


5.28.1.1.2.3
log
@fixes throughout code but all tests and examples finally run
see NEWS file for summary
@
text
@d39 1
a39 1
EXTERN int	exp_interpreter _ANSI_ARGS_((Tcl_Interp *,Tcl_Obj *));
d50 1
@


