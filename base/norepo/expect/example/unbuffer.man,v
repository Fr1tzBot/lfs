head	5.31;
access;
symbols
	expect_5_45:5.31
	expect_6_branch:5.31.0.2
	expect_5_44_1_15:5.31
	activestate_win32_port_start:5.29
	win32-jump-point-1:5.28.1.1
	telco-tec-win32-take2-branch:5.28.1.1.0.12
	telco-tec-win32-branch:5.28.1.1.0.10
	expect-sf418892-sf439042-branch:5.28.1.1.0.8
	tclpro-1-5-0:5.28.1.1
	tclpro-1-4-1:5.28.1.1
	tclpro-1-4-0:5.28.1.1
	expect-5-32-2:5.28.1.1
	expect-5-32-0:5.28.1.1
	ajuba-ajuba2-2-0:5.28.1.1
	scriptics-sc-2-0-b5:5.28.1.1
	scriptics-sc-2-0-fixed:5.28.1.1
	scriptics-sc-2-0-b2:5.28.1.1
	scriptics-sc-2-0-b1:5.28.1.1
	scriptics-sc-1-1:5.28.1.1
	scriptics-sc-1-1-b1:5.28.1.1
	scriptics-sc-1-1-branch:5.28.1.1.0.6
	scriptics-sc-1-1-base:5.28.1.1
	scriptics-sc-1-0:5.28.1.1
	scriptics-sc-1-0-branch:5.28.1.1.0.4
	scriptics-sc-1-0-base:5.28.1.1
	expect-5-31-3:5.28.1.1
	scriptics-bc-1-0-b1:5.28.1.1
	scriptics-tclpro-1-3-0:5.28.1.1
	scriptics-tclpro-1-3-b4:5.28.1.1
	scriptics-tclpro-1-3-b3:5.28.1.1
	expect-5-31:5.28.1.1
	expect-5-31-branch:5.28.1.1.0.2
	expect-5-31-base:5.28.1.1
	scriptics-tclpro-1-2:5.28.1.1
	scriptics-tclpro-1-2-b2:5.28.1.1
	scriptics-tclpro-1-2-b1:5.28.1.1
	scriptics-tclpro-1-2-a1:5.28.1.1
	expect-5-28-1:5.28.1.1
	expect:5.28.1;
locks; strict;
comment	@.\" @;


5.31
date	2007.06.28.19.23.41;	author andreas_kupries;	state Exp;
branches;
next	5.30;

5.30
date	2004.02.26.01.02.44;	author andreas_kupries;	state Exp;
branches;
next	5.29;

5.29
date	2001.11.09.19.36.18;	author andreas_kupries;	state Exp;
branches;
next	5.28;

5.28
date	98.10.14.22.53.24;	author cvsadmin;	state Exp;
branches
	5.28.1.1;
next	;

5.28.1.1
date	98.10.14.22.53.24;	author cvsadmin;	state Exp;
branches
	5.28.1.1.8.1;
next	;

5.28.1.1.8.1
date	2001.11.09.19.40.03;	author andreas_kupries;	state Exp;
branches;
next	;


desc
@@


5.31
log
@
	* Merged changes from the official version 5.44.1 of expect into
	  the SF sources. See the details below.

	  --------------------
	  Marius Schamsula <marius173@@mchsi.xcom> reported tclconfig
	  missing, evidentally for new TEA.

	  Lots of massaging to fix TEAification of Makefile and configure
	  including that version numbers will now be full three part.

	  Daniel Wong <danielwong@@berkeley.xedu> noted the home page
	  should note that Wikipedia has a very readable entry for Expect.

	  Andre Alves <aalves@@escloyalty.xcom> noted passmass needed some
	  fixes to handle Solaris 9 passwd prompt changes.

	  Andreas fixed several things: changes to better support TEA, fix
	  debugger interaction with nonblocking mode, and probably other
	  things I'm overlooking.

	  Martin Dietze <di@@fh-wedel.xde> noted that autoconf 2.59 is
	  confused by C comment after undefs in expect_cf.h.in.

	  Added additional code to unbuffer -p so that if a process
	  earlier in the pipeline exits, unbuffer attempts to recover any
	  remaining output from the spawned proc before unbuffer itself
	  exits.

	  Jeffrey Hobbs noted that once stty was called, a bg'd script
	  would be suspended at exit.  Turned out to be overaggressive
	  code in stty that recorded what 'damage' the user might have
	  caused when calling stty in the first place.

	  Jens Petersen provided patch to make setpgrp configure better on
	  some Linux systems.

	  Added example/getpassck script to test for getpass bug.

	  multixterm had debugging stuff leftover ("hello").
	  --------------------
@
text
@.TH UNBUFFER 1 "1 June 1994"
.SH NAME
unbuffer \- unbuffer output
.SH SYNOPSIS
.B unbuffer
.I program
[
.I args
]
.SH INTRODUCTION
.B unbuffer
disables the output buffering that occurs when program output
is redirected from non-interactive programs.
For example, suppose you are watching the output from a fifo by running it
through od and then more.  
.nf

	od -c /tmp/fifo | more

.fi
You will not see anything until a full page
of output has been produced.

You can disable this automatic buffering as follows:

.nf

	unbuffer od -c /tmp/fifo | more

.fi
Normally, unbuffer does not read from stdin.  This simplifies use of unbuffer in some situations.  To use unbuffer in a pipeline, use the -p flag.
Example:
.nf

        process1 | unbuffer -p process2 | process3
.fi
.SH CAVEATS

unbuffer -p may appear to work incorrectly if a process feeding input
to unbuffer exits.  Consider:
.nf
        process1 | unbuffer -p process2 | process3

.fi
If process1 exits, process2 may not yet have finished.  It is
impossible for unbuffer to know long to wait for process2 and process2
may not ever finish, for example, if it is a filter.  For expediency,
unbuffer simply exits when it encounters an EOF from either its input
or process2.

In order to have a version of unbuffer that worked in all situations,
an oracle would be necessary.  If you want an application-specific
solution, workarounds or hand-coded Expect may be more suitable.  For
example, the following example shows how to allow grep to finish
processing when the cat before it finishes first.  Using cat to feed
grep would never require unbuffer in real life.  It is merely a
placeholder for some imaginary process that may or may not finish.
Similarly, the final cat at the end of the pipeline is also a
placeholder for another process.

.nf

$ cat /tmp/abcdef.log | grep abc | cat
abcdef
xxxabc defxxx
$ cat /tmp/abcdef.log | unbuffer grep abc | cat
$ (cat /tmp/abcdef.log ; sleep 1) | unbuffer grep abc | cat
abcdef
xxxabc defxxx
$ 
.fi
.SH BUGS

The man page is longer than the program.

.SH SEE ALSO
.I
"Exploring Expect: A Tcl-Based Toolkit for Automating Interactive Programs"
\fRby Don Libes,
O'Reilly and Associates, January 1995.
.SH AUTHOR
Don Libes, National Institute of Standards and Technology
@


5.30
log
@
	* Merged changes from the official version 5.40 of expect into the
	  SF sources. See details below. Partially already done (Rich
	  Kennedy's patch).

	  --------------------
	  Eric Raymond <esr@@snark.thyrsus.xcom> provided troff-related
	  fixes for the expect, lib, and dislocate man pages.

	  Rich Kennedy <rickenne@@cisco.xcom> noted a bug having to do
	  with our caching of whether we have registered a filehandler.
	  This broke when Tcl was setting a handler on the same file.

	  Ken Pizzini <ken.pizzini@@explicate.xorg> provided patch for
	  leak in spawn error handling.

	  Pete Lancashire <plancashire@@columbia.xcom> noted autopasswd
	  example broke on Solaris which capitalized prompts.
	  --------------------
@
text
@d13 1
a13 1
is redirected.
@


5.29
log
@
Upgrading to 5.33.
@
text
@d31 1
a31 2
When you have a pipeline, unbuffer must be applied to each element
except the last (since that doesn't have its output redirected).
d35 36
a70 1
        unbuffer p1 | unbuffer p2 | unbuffer p3 | p4
@


5.28
log
@Initial revision
@
text
@d31 7
@


5.28.1.1
log
@Import of Expect v. 5.28.1
@
text
@@


5.28.1.1.8.1
log
@Upgrading to 5.33.
@
text
@a30 7
When you have a pipeline, unbuffer must be applied to each element
except the last (since that doesn't have its output redirected).
Example:
.nf

        unbuffer p1 | unbuffer p2 | unbuffer p3 | p4
.fi
@

