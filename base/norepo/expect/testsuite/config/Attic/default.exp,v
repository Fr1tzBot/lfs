head	5.30;
access;
symbols
	expect_6_branch:5.29.0.2
	expect_5_44_1_15:5.29
	activestate_win32_port_start:5.28.1.1
	win32-jump-point-1:5.28.1.1
	telco-tec-win32-take2-branch:5.28.1.1.0.12
	telco-tec-win32-branch:5.28.1.1.0.10
	expect-sf418892-sf439042-branch:5.28.1.1.0.8
	tclpro-1-5-0:5.28.1.1
	tclpro-1-4-1:5.28.1.1
	tclpro-1-4-0:5.28.1.1
	expect-5-32-2:5.28.1.1
	expect-5-32-0:5.28.1.1
	ajuba-ajuba2-2-0:5.28.1.1
	scriptics-sc-2-0-b5:5.28.1.1
	scriptics-sc-2-0-fixed:5.28.1.1
	scriptics-sc-2-0-b2:5.28.1.1
	scriptics-sc-2-0-b1:5.28.1.1
	scriptics-sc-1-1:5.28.1.1
	scriptics-sc-1-1-b1:5.28.1.1
	scriptics-sc-1-1-branch:5.28.1.1.0.6
	scriptics-sc-1-1-base:5.28.1.1
	scriptics-sc-1-0:5.28.1.1
	scriptics-sc-1-0-branch:5.28.1.1.0.4
	scriptics-sc-1-0-base:5.28.1.1
	expect-5-31-3:5.28.1.1
	scriptics-bc-1-0-b1:5.28.1.1
	scriptics-tclpro-1-3-0:5.28.1.1
	scriptics-tclpro-1-3-b4:5.28.1.1
	scriptics-tclpro-1-3-b3:5.28.1.1
	expect-5-31:5.28.1.1
	expect-5-31-branch:5.28.1.1.0.2
	expect-5-31-base:5.28.1.1
	scriptics-tclpro-1-2:5.28.1.1
	scriptics-tclpro-1-2-b2:5.28.1.1
	scriptics-tclpro-1-2-b1:5.28.1.1
	scriptics-tclpro-1-2-a1:5.28.1.1
	expect-5-28-1:5.28.1.1
	expect:5.28.1;
locks; strict;
comment	@# @;


5.30
date	2010.09.30.17.14.07;	author andreas_kupries;	state dead;
branches;
next	5.29;

5.29
date	2010.07.02.16.03.31;	author eee;	state Exp;
branches;
next	5.28;

5.28
date	98.10.14.22.53.24;	author cvsadmin;	state Exp;
branches
	5.28.1.1;
next	;

5.28.1.1
date	98.10.14.22.53.24;	author cvsadmin;	state Exp;
branches;
next	;


desc
@@


5.30
log
@
	* Makefile.in: Continued work on the 'make dist' target (config.{sub,guess})
	* install.sh: Removed unused file.
	* mkinstalldirs: Removed unused file.
	* tclconfig/README.txt: Removed unused file.
	* testsuite/config/: Removed contents of unused directory.
	* test/.Sanitize: Removed unused file.
@
text
@#   Copyright (C) 1988, 1990, 1991, 1992 Free Software Foundation, Inc.

# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# (at your option) any later version.
# 
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
# 
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.  */

# Please email any bugs, comments, and/or additions to this file to:
# bug-dejagnu@@prep.ai.mit.edu

# This file was written by Rob Savoye. (rob@@cygnus.com)

global EXPECT
if ![info exists EXPECT] then {
    set EXPECT $objdir/expect
}

set eprompt "expect\[0-9.\]*> "
global eprompt

#
# expect_version -- extract and print the version number of expect
#
proc expect_version { } {
    global EXPECT

    catch {exec echo "puts \[exp_version\]\n" | $EXPECT} version
    if [info exists version] then {
	clone_output "[which $EXPECT] version is $version\n"
    unset version
}
}

#
# expect_exit -- exit the test driver for expect
#
proc expect_exit {} {
}

#
# expect_start -- start expect
#
proc expect_start { } {
    global spawn_id
    global srcdir
    global EXPECT
    global eprompt 
    global objdir
    
    set defs    "$srcdir/../tests/defs"
    
    if {[which $EXPECT] != 0} then {
    spawn $EXPECT
    } else {
	error "Can't find $EXPECT"
    }

    expect {
	-re "expect.*> " {
	    verbose "Started the child expect shell"
	}
	timeout {
	    error "Timed out starting the child expect shell."
	}
    }
    
    exp_send "set objdir $objdir\r"
    verbose "Sourcing $defs..."
    exp_send "source $defs\r"
    expect {
        -re ".*source $defs.*$" {
            verbose "Sourced $defs"
        }
        "Error: couldn't read file*" {
            error "Couldn't source $defs"
            return -1
        }
        -re "$eprompt" {
            verbose "Got prompt, sourced $defs"
            }
        timeout {
            error "Timed out sourcing $defs."
            return 1
        }
    }
    
    sleep 2
    exp_send "set VERBOSE 1\r"
    expect {
        -re "set VERBOSE 1\[\r\n\]*1\[\r\n\]*$eprompt" {
            verbose "Set verbose flag for tests"
        }
        timeout {
            perror "Timed out setting verbose flag."
        }
    }
    return $spawn_id
}
@


5.29
log
@/tmp/f
@
text
@@


5.28
log
@Initial revision
@
text
@@


5.28.1.1
log
@Import of Expect v. 5.28.1
@
text
@@
