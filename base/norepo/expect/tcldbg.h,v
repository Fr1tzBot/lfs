head	5.30;
access;
symbols
	expect_5_45:5.30
	expect_6_branch:5.30.0.2
	expect_5_44_1_15:5.30
	activestate_win32_port_start:5.29
	win32-jump-point-1:5.29
	telco-tec-win32-take2-branch:5.29.0.12
	telco-tec-win32-branch:5.29.0.10
	expect-sf418892-sf439042-branch:5.29.0.8
	tclpro-1-5-0:5.29
	tclpro-1-4-1:5.29
	tclpro-1-4-0:5.29
	expect-5-32-2:5.29
	expect-5-32-0:5.29
	ajuba-ajuba2-2-0:5.29
	scriptics-sc-2-0-b5:5.29
	scriptics-sc-2-0-fixed:5.29
	scriptics-sc-2-0-b2:5.29
	scriptics-sc-2-0-b1:5.29
	scriptics-sc-1-1:5.29
	scriptics-sc-1-1-b1:5.29
	scriptics-sc-1-1-branch:5.29.0.6
	scriptics-sc-1-1-base:5.29
	scriptics-sc-1-0:5.29
	scriptics-sc-1-0-branch:5.29.0.4
	scriptics-sc-1-0-base:5.29
	expect-5-31-3:5.29
	scriptics-bc-1-0-b1:5.29
	scriptics-tclpro-1-3-0:5.29
	scriptics-tclpro-1-3-b4:5.29
	scriptics-tclpro-1-3-b3:5.29
	expect-5-31:5.29
	expect-5-31-branch:5.29.0.2
	expect-5-31-base:5.29
	scriptics-tclpro-1-2:5.29
	scriptics-tclpro-1-2-b2:5.28.1.1
	scriptics-tclpro-1-2-b1:5.28.1.1
	scriptics-tclpro-1-2-a1:5.28.1.1
	expect-5-28-1:5.28.1.1
	expect:5.28.1;
locks; strict;
comment	@ * @;


5.30
date	2005.03.29.23.08.17;	author andreas_kupries;	state Exp;
branches;
next	5.29;

5.29
date	99.02.12.23.51.47;	author libes;	state Exp;
branches
	5.29.10.1;
next	5.28;

5.28
date	98.10.14.22.53.20;	author cvsadmin;	state Exp;
branches
	5.28.1.1;
next	;

5.28.1.1
date	98.10.14.22.53.20;	author cvsadmin;	state Exp;
branches;
next	;

5.29.10.1
date	2001.10.02.23.04.51;	author davygrvy;	state dead;
branches;
next	;


desc
@@


5.30
log
@
	* exp_chan.c: Fixed problem with debugger introduced at '2004-06-14'.
	* tcldbg.h:   For a nonblocking stdin the debugger blowed up on the
	* Dbg.c:      empty reads it could get, exiting the application. I
	              guess that this was an implicit 'panic'. Fix:

		      - Split ExpBlockmodeProc into high- and lowlevel
		        code, the latter for use by the debugger. The
		        high-level code tells the debugger which state
		        stdin is in (doing this explicitly because if
		        FIONBIO is used it is not possible to query the fd
		        directly, and I saw no reason to #ifdef for fcntl
		        which can).

		      - Debugger now exports a function for use by the
		        blockmode proc, and in each interaction it checks
		        for nonblocking input, forces blocking if
		        necessary. At the end of each interaction the true
		        mode is restored. Both operations use the
		        low-level blockmode code.
@
text
@/* Dbg.h - Tcl Debugger include file

Written by: Don Libes, NIST, 3/23/93

Design and implementation of this program was paid for by U.S. tax
dollars.  Therefore it is public domain.  However, the author and NIST
would appreciate credit if this program or parts of it are used.

*/

/* _DEBUG or _DBG is just too likely, use something more unique */
#ifndef _NIST_DBG
#define _NIST_DBG

#include "tcl.h"

typedef int (Dbg_InterProc) _ANSI_ARGS_((Tcl_Interp *interp, ClientData data));
typedef int (Dbg_IgnoreFuncsProc) _ANSI_ARGS_((
			Tcl_Interp *interp,
			char *funcname));
typedef void (Dbg_OutputProc) _ANSI_ARGS_((
			Tcl_Interp *interp,
			char *output,
			ClientData data));

typedef struct {
  Dbg_InterProc *func;
  ClientData data;
} Dbg_InterStruct;

typedef struct {
  Dbg_OutputProc *func;
  ClientData data;
} Dbg_OutputStruct;

EXTERN char *Dbg_VarName;
EXTERN char *Dbg_DefaultCmdName;

/* trivial interface, creates a "debug" command in your interp */
EXTERN int Tcldbg_Init _ANSI_ARGS_((Tcl_Interp *));

EXTERN void Dbg_On _ANSI_ARGS_((Tcl_Interp *interp,
					int immediate));
EXTERN void Dbg_Off _ANSI_ARGS_((Tcl_Interp *interp));
EXTERN char **Dbg_ArgcArgv _ANSI_ARGS_((int argc,char *argv[],
					int copy));
EXTERN int Dbg_Active _ANSI_ARGS_((Tcl_Interp *interp));
EXTERN Dbg_InterStruct Dbg_Interactor _ANSI_ARGS_((
					Tcl_Interp *interp,
					Dbg_InterProc *interactor,
					ClientData data));
EXTERN Dbg_IgnoreFuncsProc *Dbg_IgnoreFuncs _ANSI_ARGS_((
					Tcl_Interp *interp,
					Dbg_IgnoreFuncsProc *));
EXTERN Dbg_OutputStruct Dbg_Output _ANSI_ARGS_((
					Tcl_Interp *interp,
					Dbg_OutputProc *,
					ClientData data));

EXTERN void Dbg_StdinMode _ANSI_ARGS_((int mode));

#endif /* _NIST_DBG */
@


5.29
log
@numerous edits - getting synchronized (first time I've used CVS), see
HISTORY file for more info
@
text
@d60 2
@


5.29.10.1
log
@Top-level source files removed.
@
text
@@


5.28
log
@Initial revision
@
text
@d40 1
a40 1
EXTERN int Dbg_Init _ANSI_ARGS_((Tcl_Interp *));
@


5.28.1.1
log
@Import of Expect v. 5.28.1
@
text
@@
