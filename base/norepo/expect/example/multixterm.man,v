head	1.8;
access;
symbols
	expect_5_45:1.8
	expect_6_branch:1.8.0.2
	expect_5_44_1_15:1.8
	activestate_win32_port_start:1.4;
locks; strict;
comment	@.\" @;


1.8
date	2007.06.28.19.23.40;	author andreas_kupries;	state Exp;
branches;
next	1.7;

1.7
date	2005.02.15.18.11.31;	author andreas_kupries;	state Exp;
branches;
next	1.6;

1.6
date	2004.07.15.20.24.41;	author andreas_kupries;	state Exp;
branches;
next	1.5;

1.5
date	2003.09.05.19.01.59;	author andreas_kupries;	state Exp;
branches;
next	1.4;

1.4
date	2002.05.09.14.03.48;	author libes;	state Exp;
branches;
next	1.3;

1.3
date	2002.04.17.04.07.36;	author libes;	state Exp;
branches;
next	1.2;

1.2
date	2002.04.15.23.11.17;	author libes;	state Exp;
branches;
next	1.1;

1.1
date	2002.04.15.18.05.26;	author libes;	state Exp;
branches;
next	;


desc
@@


1.8
log
@
	* Merged changes from the official version 5.44.1 of expect into
	  the SF sources. See the details below.

	  --------------------
	  Marius Schamsula <marius173@@mchsi.xcom> reported tclconfig
	  missing, evidentally for new TEA.

	  Lots of massaging to fix TEAification of Makefile and configure
	  including that version numbers will now be full three part.

	  Daniel Wong <danielwong@@berkeley.xedu> noted the home page
	  should note that Wikipedia has a very readable entry for Expect.

	  Andre Alves <aalves@@escloyalty.xcom> noted passmass needed some
	  fixes to handle Solaris 9 passwd prompt changes.

	  Andreas fixed several things: changes to better support TEA, fix
	  debugger interaction with nonblocking mode, and probably other
	  things I'm overlooking.

	  Martin Dietze <di@@fh-wedel.xde> noted that autoconf 2.59 is
	  confused by C comment after undefs in expect_cf.h.in.

	  Added additional code to unbuffer -p so that if a process
	  earlier in the pipeline exits, unbuffer attempts to recover any
	  remaining output from the spawned proc before unbuffer itself
	  exits.

	  Jeffrey Hobbs noted that once stty was called, a bg'd script
	  would be suspended at exit.  Turned out to be overaggressive
	  code in stty that recorded what 'damage' the user might have
	  caused when calling stty in the first place.

	  Jens Petersen provided patch to make setpgrp configure better on
	  some Linux systems.

	  Added example/getpassck script to test for getpass bug.

	  multixterm had debugging stuff leftover ("hello").
	  --------------------
@
text
@.TH MULTIXTERM 1 "16 August 2002"
.SH NAME
multixterm \- drive multiple xterms separately or together
.SH SYNOPSIS
.B multixterm
[
.I args
]
.SH DESCRIPTION
Multixterm creates multiple xterms that can be driven together
or separately.

In its simplest form, multixterm is run with no arguments and
commands are interactively entered in the first entry field.
Press return (or click the "new xterm" button) to create a new
xterm running that command.

Keystrokes in the "stdin window" are redirected to all xterms
started by multixterm.  xterms may be driven separately simply
by focusing on them.

The stdin window must have the focus for keystrokes to be sent
to the xterms.  When it has the focus, the color changes to
aquamarine.  As characters are entered, the color changes to
green for a second.  This provides feedback since characters
are not echoed in the stdin window.

Typing in the stdin window while holding down the alt or meta
keys sends an escape character before the typed characters.
This provides support for programs such as emacs.

.SH ARGUMENTS
.RS
.TP 4
-xa
The optional \-xa argument indicates arguments to pass to
xterm.

.TP
-xc
The optional \-xc argument indicates a command to be run in
each named xterm (see \-xn).  With no \-xc argument, the command
is the current shell.

.TP 4
-xd
The optional \-xd argument indicates a directory to search for
files that will appear in the Files menu.  By default, the
directory is: ~/lib/multixterm

.TP 4
-xf
The optional \-xf argument indicates a file to be read at
startup.  See FILES below for more info.

.TP 4
-xn
The optional \-xn argument indicates a name for each xterm.
This name will also be substituted for any %n in the command
argument (see \-xc).

.TP 4
-xv
The optional \-xv flag puts multixterm into a verbose mode
where it will describe some of the things it is doing
internally.  The verbose output is not intended to be
understandable to anyone but the author.

.RE
Less common options may be changed by the startup file (see
FILES below).

All the usual X and wish flags are supported (i.e., \-display,
\-name).  There are so many of them that to avoid colliding and
make them easy to remember, all the multixterm flags begin
with \-x.

If any arguments do not match the flags above, the remainder of the
command line is made available for user processing.  By default, the
remainder is used as a list of xterm names in the style of \-xn.  The
default behavior may be changed using the .multixtermrc file (see DOT
FILE below).

.SH "EXAMPLE COMMAND LINE ARGUMENTS"
The following command line starts up two xterms using ssh to
the hosts bud and dexter.

	multixterm \-xc "ssh %n" bud dexter

.SH FILES
Command files may be used to drive or initialize multixterm.
The File menu may be used to invoke other files.  If files
exist in the command file directory (see \-xd above), they will
appear in the File menu.  Files may also be loaded by using
File->Open.  Any filename is acceptable but the File->Open
browser defaults to files with a .mxt suffix.

Files are written in Tcl and may change any variables or
invoke any procedures.  The primary variables of interest are 'xtermCmd'
which identifies the command (see \-xc) and 'xtermNames'
which is a list of names (see \-xn).  The procedure
xtermStartAll, starts xterms for each name in the list.  Other
variables and procedures may be discovered by examining
multixterm itself.

.SH "EXAMPLE FILE"
The following file does the same thing as the earlier example
command line:
.nf

	# start two xterms connected to bud and dexter
	set xtermCmd "ssh %n"
	set xtermNames {bud dexter}
	xtermStartAll

.fi
.SH "DOT FILE"
At startup, multixterm reads ~/.multixtermrc if present.  This
is similar to the command files (see FILES above) except
that .multixtermrc may not call xtermStartAll.  Instead it is
called implicitly, similar to the way that it is implicit in
the command line use of \-xn.

The following example .multixtermrc file makes every xterm run
ssh to the hosts named on the command line.

	set xtermCmd "ssh %n"

Then multixterm could be called simply:

	multixterm bud dexter

If any command-line argument does not match a multixterm flag,
the remainder of the command line is made available to .multixtermrc
in the argv variable.  If argv is non-empty when .multixtermrc returns, it is assigned to xtermNames unless xtermNames is non-empty in which case, the
content of argv is ignored.

Commands from multixterm are evaluated early in the
initialization of multixterm.  Anything that must be done late
in the initialization (such as adding additional bindings to
the user interface) may be done by putting the commands inside
a procedure called "initLate".

.SH MENUS
Except as otherwise noted, the menus are self-explanatory.
Some of the menus have dashed lines as the first entry.
Clicking on the dashed lines will "tear off" the menus.

.SH "USAGE SUGGESTION \- ALIASES AND COMMAND FILES"
Aliases may be used to store lengthy command-line invocations.
Command files can be also be used to store such invocations
as well as providing a convenient way to share configurations.

Tcl is a general-purpose language.  Thus multixterm command
files can be extremely flexible, such as loading hostnames
from other programs or files that may change from day-to-day.
In addition, command files can be used for other purposes.
For example, command files may be used to prepared common
canned interaction sequences.  For example, the command to
send the same string to all xterms is:

    xtermSend "a particularly long string"

The File menu (torn-off) makes canned sequences particularly
convenient.  Interactions could also be bound to a mouse button,
keystroke, or added to a menu via the .multixtermrc file.

The following .multixtermrc causes tiny xterms to tile across
and down the screen.  (You may have to adjust the parameters
for your screen.)  This can be very helpful when dealing with
large numbers of xterms.
.nf

    set yPos 0
    set xPos 0

    trace variable xtermArgs r traceArgs

    proc traceArgs {args} {
        global xPos yPos
        set ::xtermArgs "-geometry 80x12+$xPos+$yPos \-font 6x10"
        if {$xPos} {
            set xPos 0
            incr yPos 145
            if {$yPos > 800} {set yPos 0}
        } else {
            set xPos 500
        }
    }
.fi

The xtermArgs variable in the code above is the variable corresponding
to the \-xa argument.

xterms can be also be created directly.  The following command file
creates three xterms overlapped
horizontally:
.nf

    set xPos 0
    foreach name {bud dexter hotdog} {
        set ::xtermArgs "-geometry 80x12+$xPos+0 \-font 6x10"
        set ::xtermNames $name
        xtermStartAll
        incr xPos 300
    }

.fi
.SH "USAGE SUGGESTION \- SELECTING HOSTS BY NICKNAME"
The following .multixtermrc shows an example of changing the
default handling of the arguments from hostnames to a filename
containing hostnames:

	set xtermNames [exec cat $argv]

The following is a variation, retrieving the host names from
the yp database:

	set xtermNames [exec ypcat $argv]

The following hardcodes two sets of hosts, so that you can
call multixterm with either "cluster1" or "cluster2":
.nf

	switch $argv {
            cluster1 {
                set xtermNames "bud dexter"
            }
            cluster2 {
                set xtermNames "frank hotdog weiner"
            }
        }

.fi


.SH COMPARE/CONTRAST
It is worth comparing multixterm to xkibitz.  Multixterm
connects a separate process to each xterm.  xkibitz connects
the same process to each xterm.

.SH LIMITATIONS

Multixterm provides no way to remotely control scrollbars, resize, and
most other window system related functions.  

Because xterm has no mechanism for propagating size information to
external processes, particularly for character graphic applications
(e.g., vi, emacs), you may have to manually ensure that the spawned
process behind each xterm has the correct size.  For example, if you
create or set the xterm to a size, you may have to send an explicit
stty command with the correct size to the spawned process(es).
Alternatively, you can add the correct size argument when an xterm is
created (i.e., "-geometry 80x20").

Multixterm can only control new xterms that multixterm itself has
started.

As a convenience, the File menu shows a limited number of
files.  To show all the files, use File->Open.

.SH FILES
$DOTDIR/.multixtermrc   initial command file
.br
~/.multixtermrc         fallback command file
.br
~/lib/multixterm/       default command file directory

.SH BUGS
If multixterm is killed using an uncatchable kill, the xterms
are not killed.  This appears to be a bug in xterm itself.

Send/expect sequences can be done in multixterm command files.
However, due to the richness of the possibilities, to document
it properly would take more time than the author has at present.

.SH REQUIREMENTS
Requires Expect 5.36.0 or later.
.br
Requires Tk 8.3.3 or later.

.SH VERSION
This man page describes version 1.8 of multixterm.

The latest version of multixterm is available from
http://expect.nist.gov/example/multixterm .  If your version of Expect
and Tk are too old (see REQUIREMENTS above), download a new version of
Expect from http://expect.nist.gov

.SH DATE
April 30, 2002

.SH AUTHOR
Don Libes <don@@libes.com>

.SH LICENSE
Multixterm is in the public domain; however the author would
appreciate acknowledgement if multixterm or parts of it or ideas from
it are used.
@


1.7
log
@
	* Merged changes from the official versions 5.42.1 and 5.43.0 of
	  expect into the SF sources. See the details below.

	  --------------------
	  Martin Forssen <maf@@tkrat.xorg> fixed bug in ExpOutputProc
	  that caused misbehavior during partial writes.

	  Someone noted that gets stdin behaves differently (returns -1
	  immediately) from tclsh because with 5.42, stdin is unblocked by
	  defaults.

	  Robroy Gregg <robroy@@armory.xcom> noted that expect_background
	  ignores timeouts.  Added to documentation.

	  Jens Peterson <peterson@@redhat.xcom> provided patch for
	  "mkpasswd -vo".

	  Gary Bliesener <gary.bliesener@@nextel.xcom> noted that
	  multixterm failed on his system which had an old Tk that didn't
	  support the Tk package.

	  Removed beta designation.

	  Daniel A. Steffen <steffen@@ics.mq.edu.xau> provided patch for
	  MacOS to avoid panic-redefinition.
	  --------------------
@
text
@a242 2
Multixterm provides no way to remotely control scrollbars,
resize, and most other window system related functions.
d244 14
a257 2
Multixterm can only control new xterms that multixterm itself
has started.
@


1.6
log
@
	* Merged changes from the official version 5.42b0 of expect into
	  the SF sources. See details below (In the ChangeLog).
@
text
@d276 3
a278 3
http://expect.nist.gov/example/multixterm . However, if your version
of Expect and Tk are too old (see REQUIREMENTS above) you should
download a new version of expect from http://expect.nist.gov
d288 2
a289 2
appreciate acknowledgement if multixterm or parts of it are
used.
@


1.5
log
@
	* Merged changes from the official version 5.39 of expect into the
	  SF sources. See details below. Partially already done.

	  --------------------
	  Poorva Gupta <poorva@@cup.hp.xcom> noted that grantpt/unlockpt
	  order was backward.  Strange that this was never a prob before!

	  Eric Raymond <esr@@snark.thyrsus.xcom> provided a troff-related
	  fix for the multixterm man page.

	  Nicolas Roeser <n-roeser@@gmx.xnet> noted confusion with md5 so I
	  made the Expect page more explicit about which file that hash
	  was based on.

	  Josh Purinton noted that earlier fix wasn't quite right.  Exit
	  on INT/TERM should cause Expect to exit with signal embedded in
	  status.  He also requested I obfuscate email addresses in this
	  file.

	  Guido Ostkamp <Guido.Ostkamp@@t-online.xde> and Igor Sobrado
	  <sobrado@@string1.ciencias.uniovi.xes> noted that fixline1
	  rewrote scripts to be expect scripts even if they were expectk
	  scripts.

	  Dirk Petera <dirkpetera@@yahoo.xcom> noted that any_spawn_id used
	  to work but did no longer.  Looks like a bug left over from the
	  the I18L conversion.  Fixed.

	  Steve Szabo noted exp_log_file -open channel failed.  Fixed.

	  Fixed bug from 5.31 that prevent stty from returning messages
	  from underlying program.

	  Thomas Dickey <dickey@@herndon4.his.xcom> noted that ncurses
	  ignores 2-char term names because of, well, poor assumptions and
	  coding.  Changed tkterm to use longer names.

	  Heath Moore <hmoore@@systran.xcom> noted that exp_clib could lock
	  up if remtime happened to be precisely 0.  Recoded to avoid.

	  At request of Per Otterholm <otterholm@@telia.xcom>, wrote script
	  to read from stdin and echo passwords (exercise 9 in Tk chapter
	  of Expect book).  Added to example directory as passwdprompt.

	  Josh Purinton <josh@@purinton.xorg> pointed out that by default,
	  SIGINT/TERM should cause expect's return status to be 1, not 0.

	  Paul Reithmuller <paul.reithmuller@@eng.sun.xcom> noted that
	  unbuffer shouldn't postprocess its output.  Added stty_init.

	  Mordechai T. Abzug <morty@@sanctuary.arbutus.md.xus> noted that
	  log_file wasn't recording -append status.

	  James Kelly <macubergeek@@comcast.xnet> noted weather example
	  needed new source.

	  Dimitar Haralanov <mitko@@tahoenetworks.xcom> noted that interact
	  dumped core with interact { timeout 1 }
	  --------------------
@
text
@d273 1
a273 1
1.5
@


1.4
log
@multixterm fixes
@
text
@d1 1
a1 1
.TH MULTIXTERM 1 "15 April 2002"
d99 2
a100 2
invoke any procedures.  The primary variables of interest are
'xtermCmd' which identifies the command (see \-xc) and 'xtermNames'
@


1.3
log
@Made multixterm handle user-supplied arguments.
@
text
@d183 3
a185 3
	    set xPos 0
	    incr yPos 145
	    if {$yPos > 800} {set yPos 0}
d187 1
a187 1
	    set xPos 500
d195 14
d226 7
a232 7
	    cluster1 {
		set xtermNames "bud dexter"
	    }
	    cluster2 {
		set xtermNames "frank hotdog weiner"
	    }
	}
d273 6
a278 1
1.3
d281 1
a281 1
April 16, 2002
@


1.2
log
@Added support for user-defined argument in multixterm.
@
text
@d78 5
a82 5
If any arguments do not match any of the flags above, the remainder of
the command line is left in the argv variable for user processing in
the .multixtermrc file.  The .multixtermrc file should reset argv to
the empty string when done to indicate all the arguments have been
consumed.
d84 1
a84 1
.SH EXAMPLE COMMAND LINE ARGUMENTS
d88 1
a88 1
	multixterm \-xc "ssh %n" \-xn "bud dexter"
d100 1
a100 1
'cmd' which identifies the command (see \-xc) and 'nameList'
d106 1
a106 1
.SH EXAMPLE FILE
d112 2
a113 2
	set cmd "ssh %n"
	set nameList {bud dexter}
d117 1
a117 1
.SH DOT FILE
d119 2
a120 2
is similar to the command files (see FILES above) except that
.multixtermrc may not call xtermStartAll.  Instead it is
d124 14
d142 1
a142 1
a procedure called "lateInit".
d149 1
a149 1
.SH USAGE SUGGESTIONS
d165 2
a166 2
convenient.  Especially common interactions could even be
bound to a mouse button.
d192 1
a192 1
The xtermArgs in the code above is the variable corresponding
d195 14
a208 2
The following .multixtermrc causes causes xterms running ssh to be
started for each host named in the command line.
d211 8
a218 2
   set nameList $argv
   set argv {}
a220 3
With that initialization, multixterm can then be called this way:

   multixterm bud dexter
a221 2
Many other effects are possible.  For example, an argument could be
used to select a set of hosts (such as a cluster name).
d259 1
a259 1
1.2
d262 1
a262 1
April 15, 2002
@


1.1
log
@New Expect application to control multiple xterms simultaneously.
@
text
@d78 6
d181 15
d232 1
a232 1
1.1
@

