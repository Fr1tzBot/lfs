head	5.4;
access;
symbols
	expect_5_45:5.4
	expect_6_branch:5.4.0.2
	expect_5_44_1_15:5.4
	activestate_win32_port_start:5.2
	win32-jump-point-1:5.1
	telco-tec-win32-take2-branch:5.1.0.6
	telco-tec-win32-branch:5.1.0.4
	expect-sf418892-sf439042-branch:5.1.0.2
	tclpro-1-5-0:5.1
	tclpro-1-4-1:5.1
	tclpro-1-4-0:5.1
	expect-5-32-2:5.1
	expect-5-32-0:5.1
	ajuba-ajuba2-2-0:1.1.2.3
	scriptics-sc-2-0-b5:1.1.2.3
	scriptics-sc-2-0-fixed:1.1.2.3
	scriptics-sc-2-0-b2:1.1.2.3
	scriptics-sc-2-0-b1:1.1.2.3
	scriptics-sc-1-1:1.1.2.3
	scriptics-sc-1-1-b1:1.1.2.3
	scriptics-sc-1-1-branch:1.1.2.3.0.4
	scriptics-sc-1-1-base:1.1.2.3
	scriptics-sc-1-0:1.1.2.3
	scriptics-sc-1-0-branch:1.1.2.3.0.2
	scriptics-sc-1-0-base:1.1.2.3
	expect-5-31-3:1.1.2.3
	scriptics-bc-1-0-b1:1.1.2.3
	scriptics-tclpro-1-3-0:1.1.2.2
	scriptics-tclpro-1-3-b4:1.1.2.2
	scriptics-tclpro-1-3-b3:1.1.2.2
	expect-5-31:1.1.2.2
	expect-5-31-branch:1.1.0.2;
locks; strict;
comment	@# @;


5.4
date	2007.07.11.20.11.22;	author andreas_kupries;	state Exp;
branches;
next	5.3;

5.3
date	2004.05.19.17.33.39;	author andreas_kupries;	state Exp;
branches;
next	5.2;

5.2
date	2002.01.16.18.14.05;	author andreas_kupries;	state Exp;
branches;
next	5.1;

5.1
date	2000.01.06.23.22.09;	author wart;	state Exp;
branches
	5.1.2.1;
next	1.1;

1.1
date	99.06.22.05.02.31;	author libes;	state dead;
branches
	1.1.2.1;
next	;

1.1.2.1
date	99.06.22.05.02.31;	author libes;	state Exp;
branches;
next	1.1.2.2;

1.1.2.2
date	99.06.28.06.29.28;	author libes;	state Exp;
branches;
next	1.1.2.3;

1.1.2.3
date	99.08.31.23.18.37;	author jenn;	state Exp;
branches;
next	;

5.1.2.1
date	2002.01.16.18.16.53;	author andreas_kupries;	state Exp;
branches;
next	;


desc
@@


5.4
log
@
	* tests/cat.test: Added proper 'package require Expect'
	* tests/expect.test: to the test setup code (JeffH).
	* tests/logfile.test:
	* tests/pid.test:
	* tests/send.test:
	* tests/spawn.test:
	* tests/stty.test:
@
text
@# Commands covered:  log_file
#
# This file contains a collection of tests for one or more of the Tcl
# built-in commands.  Sourcing this file into Tcl runs the tests and
# generates output for errors.  No output means no errors were found.

if {[lsearch [namespace children] ::tcltest] == -1} {
    package require tcltest
    # do this in a way that is backward compatible for Tcl 8.3
    namespace import ::tcltest::test ::tcltest::cleanupTests
}
package require Expect

test logfile-1.1 {basic logfile} {
    set filename /tmp/logfile.[pid]
    file delete -force $filename
    log_file $filename
    unset spawn_id   ;# clean up results of previous test
    send "via send"
    send_user "via send_user"
    send_error "via send_stdout"
    if {[info exists ::tty_spawn_id]} {
	    send_tty "via send_tty"
    }
    send_log "via send_log"
    log_file
    set fid [open $filename]
    gets $fid buffer
    close $fid
    file delete -force $filename
    # verify everything but "send" is logged

    regexp "via send_uservia send_stdout.*via send_log" $buffer
} {1}

cleanupTests
return
@


5.3
log
@
	* Merged changes from the official version 5.41 of expect into the
	  SF sources. See details below.

	  --------------------
	  Simon Taylor <simon@@unisolve.com.xau> provided fix for interact
	  -o which was completely broken by 5.40.1.

	  Added scroll support to official tkterm.  Copied all fixes
	  from/to term_expect to/from tkterm.

	  Kiran Madabhushi <maskiran@@hotmail.xcom> encountered interact
	  diagnostics incorrectly pointing to expect_background.  Also,
	  found multiple -o flags behaving unexpectedly.  Added diag.

	  Kristoffer Eriksson <ske@@pkmab.xse> noted typo in SIMPLE code in
	  exp_inter.c.  However, this is extremely unlikely to affect any
	  machines.

	  Reinhard Max <max@@suse.xcom> noted that "make test" failed when
	  run in the background.  The log testcase was testing the
	  send_tty command.  Added code in both Expect and in the test to
	  handle this.
	  --------------------
@
text
@d12 1
@


5.2
log
@
	* Resynchronization of SourceForge with Don's sources to Expect
	  version 5.34. The changes are

	  Don Porter <don.porter@@nist.gov> provided package-related fixes
	  for test suite.

	  Brian Theado <brian.theado@@usa.net> noted that interact's -re
	  support broke when offsets kicked in.  Turned out that the
	  regexp engine supports them during execution but the results are
	  delivered RELATIVE to the offset.  (I suspect this was done
	  due to expediency.)
@
text
@d21 3
a23 1
    send_tty "via send_tty"
d31 2
a32 1
    regexp "via send_uservia send_stdoutvia send_ttyvia send_log" $buffer
@


5.1
log
@Merge of expect5-31-branch to mainline
@
text
@d9 2
a10 1
    namespace import ::tcltest::*
@


5.1.2.1
log
@
	* Resynchronization of SourceForge with Don's sources to Expect
	  version 5.34. The changes are

	  Don Porter <don.porter@@nist.gov> provided package-related fixes
	  for test suite.

	  Brian Theado <brian.theado@@usa.net> noted that interact's -re
	  support broke when offsets kicked in.  Turned out that the
	  regexp engine supports them during execution but the results are
	  delivered RELATIVE to the offset.  (I suspect this was done
	  due to expediency.)
@
text
@d9 1
a9 2
    # do this in a way that is backward compatible for Tcl 8.3
    namespace import ::tcltest::test ::tcltest::cleanupTests
@


1.1
log
@file logfile.test was initially added on branch expect-5-31-branch.
@
text
@d1 32
@


1.1.2.1
log
@new tests
@
text
@a0 25
# Commands covered:  log_file
#
# This file contains a collection of tests for one or more of the Tcl
# built-in commands.  Sourcing this file into Tcl runs the tests and
# generates output for errors.  No output means no errors were found.

if {[string compare test [info procs test]] == 1} then {source defs}

test logfile-1.1 {basic logfile} {
    set filename /tmp/logfile.[pid]
    file delete -force $filename
    log_file $filename
    send "via send"
    send_user "via send_user"
    send_error "via send_stdout"
    send_tty "via send_tty"
    send_log "via send_log"
    log_file
    set fid [open $filename]
    gets $fid buffer
    close $fid
    file delete -force $filename
    # verify everything but "send" is logged
    regexp "via send_uservia send_stdoutvia send_ttyvia send_log" $buffer
} {1}
@


1.1.2.2
log
@fixes throughout code but all tests and examples finally run
see NEWS file for summary
@
text
@a12 1
    unset spawn_id   ;# clean up results of previous test
@


1.1.2.3
log
@* Makefile.in: Changed test target to source tests/all.tcl instead
of tests/all

* tests/README: Modified documentation to reflect the change from
usage of a defs file to the use of package tcltest to run the tests

* tests/all:
* tests/defs:
* tests/all.tcl:
* tests/cat.test:
* tests/expect.test:
* tests/logfile.test:
* tests/pid.test:
* tests/send.test:
* tests/spawn.test
* tests/stty.test: Modified test files to use package tcltest,
removed tests/all and tests/defs, and added tests/all.tcl
@
text
@d7 1
a7 4
if {[lsearch [namespace children] ::tcltest] == -1} {
    package require tcltest
    namespace import ::tcltest::*
}
a26 3

cleanupTests
return
@


