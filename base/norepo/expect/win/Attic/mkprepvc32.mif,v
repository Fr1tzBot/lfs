head	1.1;
access;
symbols
	telco-tec-win32-branch:1.1.0.2;
locks; strict;
comment	@# @;


1.1
date	2001.09.28.02.15.55;	author davygrvy;	state dead;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2001.09.28.02.15.55;	author davygrvy;	state Exp;
branches;
next	1.1.2.2;

1.1.2.2
date	2001.10.14.22.15.28;	author davygrvy;	state Exp;
branches;
next	1.1.2.3;

1.1.2.3
date	2001.11.15.07.12.35;	author davygrvy;	state dead;
branches;
next	;


desc
@@


1.1
log
@file mkprepvc32.mif was initially added on branch telco-tec-win32-branch.
@
text
@@


1.1.2.1
log
@Moved the makefile prep work to a seperate file.
@
text
@a0 67
#==============================================================================
#
#   mkprepvc32.mif --
#
#   Make preparation file for the Microsoft Visual C++ 32-bit tools.
#   NMAKE specific syntax is allowed in this file.  This file prepares the 
#   environment.
#
#==============================================================================
# RCS: @@(#) $Id: mkvc32.mif,v 1.1.2.1 2001/09/26 14:24:21 davygrvy Exp $
#==============================================================================

!ifndef _MKPREPVC32_MIF
_MKPREPVC32_MIF = 1

#==============================================
# check for local.
#==============================================
!if !exist(.\win\mkvc32.mif)
!error The current working directory must be the top root of Expect before running 'makefile.win'
!endif


MAKECMD	    = nmake.exe -nologo /$(MAKEFLAGS) -f win\makefile.vc32
SYM	    =


#==============================================
# Are the tools in the path already?
#==============================================

###  Unfortunetly, we can't just source this into the parent
###  environment just once and have it affect all targets.

!if !defined(MSVCDIR)
!if     $(TOOLSETvc32VER) == 5
vcvars	    = "$(TOOLSETvc32)\vc\bin\vcvars32.bat"
!elseif $(TOOLSETvc32VER) == 6
vcvars	    = "$(TOOLSETvc32)\vc98\bin\vcvars32.bat"
!endif
!message +++ Microsoft Visual C++ tools are NOT in the path and
!message +++    $(vcvars) will be used.


### We now need to recurse back into ourselves to fix the environment,
### then bail on this run.
!if [ $(vcvars) & nmake -nologo /$(MAKEFLAGS) -f makefile.win ] != 0
!endif

BAILOUT = 1
all :
release :
test :
debugger :
slavedrv :
telnet :
genstubs :
install :
winhelp :
cvsupdate :

!else

!message +++ Microsoft Visual C++ tools are in the path.

!endif
!endif@


1.1.2.2
log
@Changed the build files to be run from the /win directory instead
of the top-root.  This will help get MS project .dsp files working.
@
text
@d10 1
a10 1
# RCS: @@(#) $Id: mkprepvc32.mif,v 1.1.2.1 2001/09/28 02:15:55 davygrvy Exp $
d24 1
a24 1
MAKECMD	    = cd win & nmake.exe -nologo /$(MAKEFLAGS) -f makefile.vc32
@


1.1.2.3
log
@old build files removed.
@
text
@d10 1
a10 1
# RCS: @@(#) $Id: mkprepvc32.mif,v 1.1.2.2 2001/10/14 22:15:28 davygrvy Exp $
@


